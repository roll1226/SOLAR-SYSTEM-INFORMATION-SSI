function planetInbg(){document.querySelector(".inbg1").classList.remove("none"),document.querySelector(".inbg2").classList.remove("none"),document.querySelector(".inbg3").classList.remove("none"),document.querySelector(".inbg4").classList.remove("none"),document.querySelector(".inbg1").classList.add("inbgani1"),setTimeout(function(){document.querySelector(".inbg2").classList.add("inbgani2"),setTimeout(function(){document.querySelector(".inbg3").classList.add("inbgani3"),setTimeout(function(){document.querySelector(".inbg4").classList.add("inbgani4")},100)},100)},100)}function sunPage(){planetInbg(),setTimeout(function(){location.href="./sun.html"},410)}function mercuryPage(){planetInbg(),setTimeout(function(){location.href="./mercury.html"},410)}function venusPage(){planetInbg(),setTimeout(function(){location.href="./venus.html"},410)}function earthPage(){planetInbg(),setTimeout(function(){location.href="./earth.html"},410)}function moonPage(){planetInbg(),setTimeout(function(){location.href="./moon.html"},410)}function marsPage(){planetInbg(),setTimeout(function(){location.href="./mars.html"},410)}function jupiterPage(){planetInbg(),setTimeout(function(){location.href="./jupiter.html"},410)}function saturnPage(){planetInbg(),setTimeout(function(){location.href="./saturn.html"},410)}function uranusPage(){planetInbg(),setTimeout(function(){location.href="./uranus.html"},410)}function neptunePage(){planetInbg(),setTimeout(function(){location.href="./neptune.html"},410)}window.onload=function(){document.getElementById("keyupText").focus()},setTimeout(function(){let num=0,tgt=100,speed=8;setInterval(function(){num<=100&&(document.querySelector(".count").innerText=num,100==++num&&(document.querySelector(".loading").classList.add("loadingOut"),document.querySelector(".loadingimg").classList.add("loadingOut")),backcnt>0&&(document.querySelector("#stage").classList.add("plamouse"),document.querySelector(".operationWrap").classList.remove("operationin"),document.querySelector(".operationWrap").classList.add("operationout")))},8)},700),setTimeout(function(){document.getElementById("stage").classList.add("moveani")},1500);let loading=new Vue({el:"#loading",data:{loading:'<div class="loadingimg loadingIn" tabindex="-1">\n                <img src="../images/loadingimage.png" alt="ローリング画像" tabindex="-1">\n                <div id="cnt" tabindex="-1">\n                  <p tabindex="-1"><span class="count fontType">0</span>％</p>\n                </div>\n              </div>'}}),operation=new Vue({el:"#operationwrap",data:{opetitle:"操作説明",page1:'<div class="operation" tabindex="-1">\n              <img src="../images/operation_one.png" alt="クリック画像" tabindex="-1">\n              <div class="text" tabindex="-1">\n                <p tabindex="-1">①惑星を選択すると...？</p>\n              </div>\n            </div>\n            <p class="arrow" tabindex="-1">&gt;</p>\n            <div class="operation" tabindex="-1">\n              <img src="../images/operation_twe.png" alt="勉強例" tabindex="-1">\n              <div class="text" tabindex="-1">\n                <p tabindex="-1">②誰よりも物知りに！</p>\n              </div>\n            </div>\n            <div class="clear" tabindex ="-1"></div>',page2:'<div class="list">\n              <ul>\n                <li tabindex="-1">\n                <img src="../images/user_off.png" alt="ユーザーボタン" tabindex="-1"> アカウント管理が出来る。<br>Aキーでも可能。\n                </li>\n                <div class="clear" tabindex="-1"></div>\n                <li tabindex="-1">\n                  <img src="../images/stop_off.png" alt="ストップボタン" tabindex="-1">惑星の動きを制御出来る。(3段階)<br>Sキーでも可能。\n                </li>\n                <div class="clear" tabindex="-1"></div>\n                <li tabindex="-1">\n                  <img src="../images/speech_off.png" alt="音声認識ボタン" tabindex="-1">音声入力によって惑星選択が出来る。<br>Dキーでも可能。\n                </li>\n                <div class="clear" tabindex="-1"></div>\n                <li tabindex="-1">\n                  <img src="../images/operation_off.png" alt="操作説明ボタン" tabindex="-1">操作説明表示が出来る。 <br>Fキーでも可能。\n                </li>\n                <li>\n                  <i class="fas fa-vr-cardboard fa-4x"></i>\n                  <br>\n                  VR機能あり！（使用には携帯が必要です）\n                </li>\n              </ul>\n            </div>',p1:!0,p2:!1,pbtn:!1,nbtn:!0,opeback:'<img src="../images/ope_back.png" alt="戻るボタン" tabindex="-1">',items:[{bg:'<div class="stars" tabindex="-1"></div>'},{bg:'<div class="twinkling" tabindex="-1"></div>'},{bg:'<div class="clouds" tabindex="-1"></div>'}]},methods:{prev:function(){1==this.p2&&(this.pbtn=!this.pbtn,this.p1=!this.p1,this.p2=!this.p2,this.nbtn=!this.nbtn)},next:function(){1==this.p1&&(this.pbtn=!this.pbtn,this.p1=!this.p1,this.p2=!this.p2,this.nbtn=!this.nbtn)}}}),btnWrapU=new Vue({el:"#userWrap",data:{imgChange:"_off"},methods:{mouseover:function(){this.imgChange="_on"},mouseleave:function(){this.imgChange="_off"}}}),userWrap=new Vue({el:".infoWrap",data:{items:[{div:'<button id="userBack" tabindex="-1" onclick="uback();"><img src="../images/back_on.png" alt="戻るボタン"></button>'},{div:'<div id="user" tabindex="-1">\n              <p tabindex="-1">\n                ゲスト<br>さん\n              </p>\n            </div>'},{div:'<div id="logintime" tabindex="-1">\n              <p tabindex="-1">\n                --- 日時 ---<br><span id="today" tabindex="-1"></span><br><span id="time" tabindex="-1"></span>\n              </p>\n            </div>'},{div:'<div id="logout" class="lognone" tabindex="-1">\n              <img src="../images/rogo.png"alt="ロゴ">\n          </div>'}]}}),btnWrapS=new Vue({el:"#stopWrap",data:{imgChange:"_off"},methods:{mouseover:function(){this.imgChange="_on"},mouseleave:function(){this.imgChange="_off"}}}),btnWrapA=new Vue({el:"#speechWrap",data:{imgChange:"_off"},methods:{mouseover:function(){this.imgChange="_on"},mouseleave:function(){this.imgChange="_off"}}}),mic=new Vue({el:"#mic",data:{mic:'<div class="masc none" tabindex="-1"></div>\n            <div class = "micWrap micOut" tabindex = "-1">\n              <p>どの<span>惑星</span>を選びますか?</p>\n              <div class="micImg">\n                <i class="fa fa-microphone mic" aria-hidden="true"></i>\n              <div class="volume-viewer-volume"></div>\n            </div>\n          </div>'}}),btnWrapO=new Vue({el:"#opewrapbtn",data:{imgChange:"_off"},methods:{mouseover:function(){this.imgChange="_on"},mouseleave:function(){this.imgChange="_off"}}}),bggo=new Vue({el:"#bggo",data:{items:[{bg:'<div class="inbg inbg1 none" tabindex="-1"></div>'},{bg:'<div class="inbg inbg2 none" tabindex="-1"></div>'},{bg:'<div class="inbg inbg3 none" tabindex="-1"></div>'},{bg:'<div class="inbg inbg4 none" tabindex="-1"></div>'}]}});Vue.config.keyCodes={su:49,su:[49],me:50,me:[50],v:51,v:[51],e:52,e:[52],mo:53,mo:[53],ma:54,ma:[54],j:55,j:[55],sa:56,sa:[56],u:57,u:[57],n:48,n:[48]};let body=new Vue({el:"#keyup",methods:{su:function(){sunPage()},me:function(){mercuryPage()},v:function(){venusPage()},e:function(){earthPage()},mo:function(){moonPage()},ma:function(){marsPage()},j:function(){jupiterPage()},sa:function(){saturnPage()},u:function(){uranusPage()},n:function(){neptunePage()}}}),vr=new Vue({el:"#vr",data:{vr:"",vr_i:'<i class="fas fa-vr-cardboard"></i>'},methods:{mouseover:function(){this.vr="vrani"},mouseleave:function(){this.vr=""},vrIn:function(){qr.qrdisplay="dis",qr.qrAni="",qr.qrImg="qrIn",document.getElementById("stage").classList.remove("plamouse")}}}),qr=new Vue({el:"#qr",data:{qrdisplay:"disnone",qrAni:"none",qrImg:"qrOut",img:'<img src="../images/qr/planet.png" alt=" 惑星QRコード">'},methods:{qrClick:function(){setTimeout(()=>{this.qrdisplay="disnone"},600),this.qrAni="none",this.qrImg="qrOut",document.getElementById("stage").classList.add("plamouse")}}});function ubtn(){document.querySelector("#stage").classList.contains("speechopen")||document.querySelector(".userinfo").classList.contains("userOut")&&(document.querySelector(".userinfo").classList.remove("userOut"),document.querySelector("#logout").classList.remove("lognone"),document.querySelector(".userinfo").classList.add("userIn"),document.querySelector("#logout").classList.add("logblock"),document.querySelector("#stage").classList.add("useropen"))}function uback(){document.querySelector(".userinfo").classList.contains("userOut")||(document.querySelector(".userinfo").classList.remove("userIn"),document.querySelector("#logout").classList.remove("logblock"),document.querySelector("#stage").classList.remove("useropen"),document.querySelector(".userinfo").classList.add("userOut"),document.querySelector("#logout").classList.add("lognone"))}function abtn(){document.querySelector(".speechBtn").classList.contains("speechout")||(recognition.start(),document.getElementById("stage").classList.add("speechopen"),document.querySelector(".speechBtn").classList.add("speechout"),document.querySelector(".micWrap").classList.add("micIn"),document.querySelector(".micWrap").classList.remove("micOut"),document.querySelector(".masc").classList.remove("none"),speechtime=setTimeout(function(){document.querySelector(".speechBtn").classList.remove("speechout"),document.querySelector("#stage").classList.remove("speechopen"),document.querySelector(".micWrap").classList.remove("micIn"),document.querySelector(".micWrap").classList.add("micOut"),document.querySelector(".masc").classList.add("none")},5e3))}function sbtn(){document.getElementById("stage").classList.contains("move")?(document.getElementById("stage").classList.remove("move"),document.getElementById("stage").classList.remove("moveani")):document.getElementById("stage").classList.contains("stop")?document.getElementById("stage").classList.contains("stop")&&(document.getElementById("stage").classList.remove("stop"),document.getElementById("stage").classList.add("move"),document.getElementById("stage").classList.remove("stopani"),setTimeout(function(){document.getElementById("stage").classList.add("moveani")},50)):document.getElementById("stage").classList.contains("move")||(document.getElementById("stage").classList.add("stop"),setTimeout(function(){document.getElementById("stage").classList.add("stopani")},50))}function obtn(){document.getElementById("stage").classList.contains("speechopen")||(document.getElementById("stage").classList.contains("plamouse")?(document.getElementById("stage").classList.remove("plamouse"),document.querySelector(".operationWrap").classList.remove("operationout"),document.querySelector(".userinfo").classList.remove("userIn"),document.getElementById("logout").classList.remove("logblock"),document.querySelector(".userinfo").classList.add("userOut"),document.querySelector(".operationWrap").classList.add("operationin"),document.getElementById("logout").classList.add("lognone")):document.getElementById("stage").classList.contains("plamouse")||(document.querySelector(".operationWrap").classList.remove("operationin"),document.querySelector(".operationWrap").classList.add("operationout"),document.getElementById("stage").classList.add("plamouse")))}function bbtn(){document.querySelector(".operationWrap").classList.contains("operationout")||(document.querySelector("#stage").classList.add("plamouse"),document.querySelector(".operationWrap").classList.remove("operationin"),document.querySelector(".operationWrap").classList.add("operationout"))}document.querySelector(".masc").addEventListener("click",function(){document.querySelector(".masc").classList.contains("none")||(recognition.stop(),document.querySelector(".speechBtn").classList.remove("speechout"),document.getElementById("stage").classList.remove("speechopen"),document.querySelector(".micWrap").classList.remove("micIn"),document.querySelector(".micWrap").classList.add("micOut"),document.querySelector(".masc").classList.add("none"),clearTimeout(speechtime))});let scene=new THREE.Scene,camera,light,ambient,gridHelper,axisHelper,lightHelper,renderer,loader,width=window.innerWidth,height=window.innerHeight,controls,targetSun=[],targetMercury=[],targetVenus=[],targetEarth=[],targetMars=[],targetJupiter=[],targetSaturn=[],targetUranus=[],targetNeptune=[],targetMoon=[],textureSun,textureMercury,textureVenus,textureEarth,textureCrowd,textureMars,textureJupiter,textureSaturn,textureSaturnRing,textureUranus,textureUranusRing,textureNeptune,textureUniverse,textureMoon,sun,mercury,venus,earth,crowd,mars,jupiter,saturn,saturnRing,uranus,uranusRing,neptune,universe,moon,sunX,sunZ,mercuryX,mercuryZ,venusX,venusZ,earthX,earthZ,marsX,marsZ,jupiterX,jupiterZ,saturnX,saturnZ,uranusX,uranusZ,neptuneX,neptuneZ,moonX,moonZ,mercuryTheta,venusTheta,earthTheta,marsTheta,jupiterTheta,saturnTheta,uranusTheta,neptuneTheta,moonTheta,sunimageText,mercuryimageText,venusimageText,earthimageText,moonimageText,marsimageText,jupiterimageText,saturnimageText,uranusimageText,neptuneimageText,sunText,mercuryText,venusText,earthText,moonText,marsText,jupiterText,saturnText,uranusText,neptuneText,targetTextSun=[],targetTextMercury=[],targetTextVenus=[],targetTextEarth=[],targetTextMoon=[],targetTextMars=[],targetTextJupiter=[],targetTextSaturn=[],targetTextUranus=[],targetTextNeptune=[],speechtime,manager,manifest=[{id:"sun",src:"../images/sun.jpg"},{id:"mercury",src:"../images/mercury.jpg"},{id:"venus",src:"../images/venus.jpg"},{id:"earth",src:"../images/earth.jpg"},{id:"crowd",src:"../images/crowd.png"},{id:"mars",src:"../images/mars.jpg"},{id:"jupiter",src:"../images/jupiter.jpg"},{id:"saturn",src:"../images/saturn.jpg"},{id:"saturn-ring",src:"../images/saturn-ring.jpg"},{id:"uranus",src:"../images/uranus.jpg"},{id:"uranus-ring",src:"../images/uranus-ring.jpg"},{id:"neptune",src:"../images/neptune.jpg"},{id:"universe",src:"../images/space.jpg"},{id:"moon",src:"../images/moon.jpg"}],loadQueue=new createjs.LoadQueue;function planetFactory(texture,radius,widthSegments,heightSegments,x,z,planetName){let sphere,sphereMercury,sphereVenus,sphereEarth,sphereMars,sphereJupiter,sphereSaturn,sphereUranus,sphereNeptune,ring;return"isSun"===planetName?(sphere=new THREE.Group,(sphere=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshBasicMaterial({map:texture,side:THREE.DoubleSide}))).add(sunText),targetSun.push(sphere),sphere.position.set(x,0,z)):"isMercury"===planetName?(sphere=new THREE.Group,sphereMercury=new THREE.Group,sphereMercury=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshLambertMaterial({map:texture})),sphere.add(sphereMercury),sphereMercury.add(mercuryText),targetMercury.push(sphereMercury),sphere.position.set(x,0,z)):"isVenus"===planetName?(sphere=new THREE.Group,sphereVenus=new THREE.Group,sphereVenus=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshLambertMaterial({map:texture})),sphere.add(sphereVenus),sphereVenus.add(venusText),targetVenus.push(sphereVenus),sphere.position.set(x,0,z)):"isEarth"===planetName?(sphere=new THREE.Group,sphereEarth=new THREE.Group,sphereEarth=new THREE.Mesh(new THREE.SphereGeometry(13,20,20),new THREE.MeshLambertMaterial({map:texture})),crowd=new THREE.Mesh(new THREE.SphereGeometry(14,20,20),new THREE.MeshLambertMaterial({map:textureCrowd,transparent:!0,side:THREE.DoubleSide})),sphereEarth.add(earthText),sphere.add(sphereEarth),sphere.add(crowd),targetEarth.push(sphereEarth),sphere.position.set(x,0,z)):"isMoon"===planetName?(sphere=new THREE.Group,(sphere=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshLambertMaterial({map:texture}))).add(moonText),targetMoon.push(sphere),sphere.position.set(x,0,z)):"isMars"===planetName?(sphere=new THREE.Group,sphereMars=new THREE.Group,(sphereMars=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshLambertMaterial({map:texture}))).add(marsText),sphere.add(sphereMars),targetMars.push(sphereMars),sphere.position.set(x,0,z)):"isJupiter"===planetName?(sphere=new THREE.Group,sphereJupiter=new THREE.Group,(sphereJupiter=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshLambertMaterial({map:texture}))).add(jupiterText),sphere.add(sphereJupiter),targetJupiter.push(sphereJupiter),sphere.position.set(x,0,z)):"isSaturn"===planetName?(sphere=new THREE.Group,sphereSaturn=new THREE.Group,sphereSaturn=new THREE.Mesh(new THREE.SphereGeometry(13,20,20),new THREE.MeshLambertMaterial({map:texture})),(ring=new THREE.Mesh(new THREE.TorusGeometry(22,5,2,1e3),new THREE.MeshPhongMaterial({map:texture,opacity:.7,transparent:!0}))).rotation.x=1.5,sphereSaturn.add(saturnText),sphere.add(sphereSaturn),sphere.add(ring),targetSaturn.push(sphereSaturn),sphere.position.set(x,0,z)):"isUranus"===planetName?(sphere=new THREE.Group,sphereUranus=new THREE.Group,sphereUranus=new THREE.Mesh(new THREE.SphereGeometry(13,20,20),new THREE.MeshLambertMaterial({map:texture})),(ring=new THREE.Mesh(new THREE.TorusGeometry(18,5,2,1e3),new THREE.MeshPhongMaterial({map:texture,opacity:.7,transparent:!0}))).rotation.x=1.5,sphereUranus.add(uranusText),sphere.add(sphereUranus),sphere.add(ring),targetUranus.push(sphereUranus),sphere.position.set(x,0,z)):"isNeptune"===planetName?(sphere=new THREE.Group,sphereNeptune=new THREE.Group,(sphereNeptune=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshLambertMaterial({map:texture}))).add(neptuneText),sphere.add(sphereNeptune),targetNeptune.push(sphereNeptune),sphere.position.set(x,0,z)):"isUniverse"===planetName&&(sphere=new THREE.Mesh(new THREE.SphereGeometry(radius,widthSegments,heightSegments),new THREE.MeshLambertMaterial({map:texture,side:THREE.DoubleSide}))).position.set(x,0,z),scene.add(sphere),sphere}function render(){requestAnimationFrame(render),sun.rotation.y+=.003,mercury.rotation.y+=.005,venus.rotation.y-=.005,earth.rotation.y+=.005,crowd.rotation.y+=.008,mars.rotation.y+=.002,jupiter.rotation.y+=.003,saturn.rotation.y+=.004,uranus.rotation.y+=.005,neptune.rotation.y+=.007,moon.rotation.y+=.007,document.querySelector("#stage").classList.contains("move")?(light.position.set(0,0,0),mercuryTheta-=.78,venusTheta-=.65,earthTheta-=.59,marsTheta-=.54,jupiterTheta-=.43,saturnTheta-=.4,uranusTheta-=.37,neptuneTheta-=.35,moonTheta-=1,sunX=0,sunZ=0,mercuryX=80,mercuryZ=80,venusX=120,venusZ=120,earthX=170,earthZ=170,marsX=230,marsZ=230,jupiterX=280,jupiterZ=280,saturnX=355,saturnZ=355,uranusX=415,uranusZ=415,neptuneX=475,neptuneZ=475,moonX=25,moonZ=25,document.querySelector("#stage").classList.contains("moveani")||(mercuryTheta=10,venusTheta=500,earthTheta=0,marsTheta=100,jupiterTheta=160,saturnTheta=80,uranusTheta=200,neptuneTheta=330,moonTheta=0,camera.position.set(400,400,800))):document.querySelector("#stage").classList.contains("stop")&&(light.position.set(sunX,0,0),mercuryTheta=0,venusTheta=0,earthTheta=0,marsTheta=0,jupiterTheta=0,saturnTheta=0,uranusTheta=0,neptuneTheta=0,moonTheta=0,sunX=-230,sunZ=-230,mercuryX=-150,mercuryZ=-150,venusX=-110,venusZ=-110,earthX=-60,earthZ=-60,marsX=0,marsZ=0,jupiterX=60,jupiterZ=60,saturnX=140,saturnZ=140,uranusX=200,uranusZ=200,neptuneX=260,neptuneZ=260,moonX=25,moonZ=25,document.querySelector("#stage").classList.contains("stopani")||camera.position.set(0,0,300)),sun.position.x=Math.cos(THREE.Math.degToRad(mercuryTheta))*sunX,sun.position.z=Math.sin(THREE.Math.degToRad(mercuryTheta))*sunZ,mercury.position.x=Math.cos(THREE.Math.degToRad(mercuryTheta))*mercuryX,mercury.position.z=Math.sin(THREE.Math.degToRad(mercuryTheta))*mercuryZ,venus.position.x=Math.cos(THREE.Math.degToRad(venusTheta))*venusX,venus.position.z=Math.sin(THREE.Math.degToRad(venusTheta))*venusZ,earth.position.x=Math.cos(THREE.Math.degToRad(earthTheta))*earthX,earth.position.z=Math.sin(THREE.Math.degToRad(earthTheta))*earthZ,mars.position.x=Math.cos(THREE.Math.degToRad(marsTheta))*marsX,mars.position.z=Math.sin(THREE.Math.degToRad(marsTheta))*marsZ,jupiter.position.x=Math.cos(THREE.Math.degToRad(jupiterTheta))*jupiterX,jupiter.position.z=Math.sin(THREE.Math.degToRad(jupiterTheta))*jupiterZ,saturn.position.x=Math.cos(THREE.Math.degToRad(saturnTheta))*saturnX,saturn.position.z=Math.sin(THREE.Math.degToRad(saturnTheta))*saturnZ,uranus.position.x=Math.cos(THREE.Math.degToRad(uranusTheta))*uranusX,uranus.position.z=Math.sin(THREE.Math.degToRad(uranusTheta))*uranusZ,neptune.position.x=Math.cos(THREE.Math.degToRad(neptuneTheta))*neptuneX,neptune.position.z=Math.sin(THREE.Math.degToRad(neptuneTheta))*neptuneZ,moon.position.x=Math.cos(THREE.Math.degToRad(moonTheta))*moonX+earth.position.x,moon.position.z=Math.sin(THREE.Math.degToRad(moonTheta))*moonZ+earth.position.z,controls.update(),renderer.render(scene,camera)}loadQueue.on("complete",function(){let sunImg=loadQueue.getResult("sun"),mercuryImg=loadQueue.getResult("mercury"),venusImg=loadQueue.getResult("venus"),earthImg=loadQueue.getResult("earth"),crowdImg=loadQueue.getResult("crowd"),marsImg=loadQueue.getResult("mars"),jupiterImg=loadQueue.getResult("jupiter"),saturnImg=loadQueue.getResult("saturn"),saturnRingImg=loadQueue.getResult("saturn-ring"),uranusImg=loadQueue.getResult("uranus"),uranusRingImg=loadQueue.getResult("uranus-ring"),neptuneImg=loadQueue.getResult("neptune"),universeImg=loadQueue.getResult("universe"),moonImg=loadQueue.getResult("moon");textureSun=new THREE.Texture(sunImg),textureMercury=new THREE.Texture(mercuryImg),textureVenus=new THREE.Texture(venusImg),textureEarth=new THREE.Texture(earthImg),textureCrowd=new THREE.Texture(crowdImg),textureMars=new THREE.Texture(marsImg),textureJupiter=new THREE.Texture(jupiterImg),textureSaturn=new THREE.Texture(saturnImg),textureSaturnRing=new THREE.Texture(saturnRingImg),textureUranus=new THREE.Texture(uranusImg),textureUranusRing=new THREE.Texture(uranusRingImg),textureNeptune=new THREE.Texture(neptuneImg),textureUniverse=new THREE.Texture(universeImg),textureMoon=new THREE.Texture(moonImg),textureSun.needsUpdate=!0,textureMercury.needsUpdate=!0,textureVenus.needsUpdate=!0,textureEarth.needsUpdate=!0,textureCrowd.needsUpdate=!0,textureMars.needsUpdate=!0,textureJupiter.needsUpdate=!0,textureSaturn.needsUpdate=!0,textureSaturnRing.needsUpdate=!0,textureUranus.needsUpdate=!0,textureUranusRing.needsUpdate=!0,textureNeptune.needsUpdate=!0,textureUniverse.needsUpdate=!0,textureMoon.needsUpdate=!0,sun=planetFactory(textureSun,50,40,40,sunX,sunZ,"isSun"),mercury=planetFactory(textureMercury,5,20,20,mercuryX,mercuryZ,"isMercury"),venus=planetFactory(textureVenus,10,20,20,venusX,venusZ,"isVenus"),earth=planetFactory(textureEarth,13,20,20,earthX,earthZ,"isEarth"),mars=planetFactory(textureMars,7,20,20,marsX,marsZ,"isMars"),jupiter=planetFactory(textureJupiter,40,30,30,jupiterX,jupiterZ,"isJupiter"),saturn=planetFactory(textureSaturn,18,20,20,saturnX,saturnZ,"isSaturn"),uranus=planetFactory(textureUranus,20,20,20,uranusX,uranusZ,"isUranus"),neptune=planetFactory(textureNeptune,17,20,20,neptuneX,neptuneZ,"isNeptune"),universe=planetFactory(textureUniverse,1e4,20,20,0,0,"isUniverse"),moon=planetFactory(textureMoon,5,20,20,0,0,"isMoon"),render()}),loadQueue.loadManifest(manifest),light=new THREE.PointLight(16777215,3,0),scene.add(light),ambient=new THREE.AmbientLight(2236962),scene.add(ambient),camera=new THREE.PerspectiveCamera(60,width/height,1,1e6),(controls=new THREE.OrbitControls(camera)).minDistance=350,controls.maxDistance=800,controls.enableDamping=!0,controls.enableKeys=!1,controls.enablePan=!1,controls.dampingFactor=.1,(renderer=new THREE.WebGLRenderer({canvas:document.querySelector("#stage")})).setSize(width,height);class text{constructor(textimg){this.testimg=new THREE.SpriteMaterial({map:(new THREE.TextureLoader).load(textimg)})}get TextImg(){return this.testimg}}function clickPosition(event){let x=event.clientX,y=event.clientY,mouse=new THREE.Vector2;mouse.x=x/window.innerWidth*2-1,mouse.y=-y/window.innerHeight*2+1;let raycaster=new THREE.Raycaster;document.querySelector("#stage").classList.contains("plamouse")&&(document.querySelector("#stage").classList.contains("useropen")||document.querySelector("#stage").classList.contains("speechopen")||raycaster.setFromCamera(mouse,camera));let interSu=raycaster.intersectObjects(targetSun),interMe=raycaster.intersectObjects(targetMercury),interVe=raycaster.intersectObjects(targetVenus),interEa=raycaster.intersectObjects(targetEarth),interMa=raycaster.intersectObjects(targetMars),interJu=raycaster.intersectObjects(targetJupiter),interSa=raycaster.intersectObjects(targetSaturn),interUr=raycaster.intersectObjects(targetUranus),interNe=raycaster.intersectObjects(targetNeptune),interMo=raycaster.intersectObjects(targetMoon),interTSU=raycaster.intersectObjects(targetTextSun),interTME=raycaster.intersectObjects(targetTextMercury),interTV=raycaster.intersectObjects(targetTextVenus),interTE=raycaster.intersectObjects(targetTextEarth),interTMO=raycaster.intersectObjects(targetTextMoon),interTMA=raycaster.intersectObjects(targetTextMars),interTJ=raycaster.intersectObjects(targetTextJupiter),interTSA=raycaster.intersectObjects(targetTextSaturn),interTU=raycaster.intersectObjects(targetTextUranus),interTN=raycaster.intersectObjects(targetTextNeptune);interSu.length>0||interTSU.length>0?sunPage():interMe.length>0||interTME.length>0?mercuryPage():interVe.length>0||interTV.length>0?venusPage():interEa.length>0||interTE.length>0?earthPage():interMa.length>0||interTMA.length>0?venusPage():interJu.length>0||interTJ.length>0?jupiterPage():interSa.length>0||interTSA.length>0?saturnPage():interUr.length>0||interTU.length>0?uranusPage():interNe.length>0||interTN.length>0?neptunePage():(interMo.length>0||interTMO.length>0)&&moonPage()}sunimageText=new text("../images/suntext.png"),(sunText=new THREE.Sprite(sunimageText.TextImg)).position.y=64,sunText.scale.set(50,35,50),targetTextSun.push(sunText),mercuryimageText=new text("../images/mercurytext.png"),(mercuryText=new THREE.Sprite(mercuryimageText.TextImg)).position.y=15,mercuryText.scale.set(40,27,40),targetTextMercury.push(mercuryText),venusimageText=new text("../images/venustext.png"),(venusText=new THREE.Sprite(venusimageText.TextImg)).position.y=20,venusText.scale.set(40,27,40),targetTextVenus.push(venusText),earthimageText=new text("../images/earthtext.png"),(earthText=new THREE.Sprite(earthimageText.TextImg)).position.y=25,earthText.scale.set(40,27,40),targetTextEarth.push(earthText),moonimageText=new text("../images/moontext.png"),(moonText=new THREE.Sprite(moonimageText.TextImg)).position.y=16,moonText.scale.set(17,17,17),targetTextMoon.push(moonText),marsimageText=new text("../images/marstext.png"),(marsText=new THREE.Sprite(marsimageText.TextImg)).position.y=19,marsText.scale.set(40,27,40),targetTextMars.push(marsText),jupiterimageText=new text("../images/jupitertext.png"),(jupiterText=new THREE.Sprite(jupiterimageText.TextImg)).position.y=53,jupiterText.scale.set(40,27,40),targetTextJupiter.push(jupiterText),saturnimageText=new text("../images/saturntext.png"),(saturnText=new THREE.Sprite(saturnimageText.TextImg)).position.y=25,saturnText.scale.set(40,27,40),targetTextSaturn.push(saturnText),uranusimageText=new text("../images/uranustext.png"),(uranusText=new THREE.Sprite(uranusimageText.TextImg)).position.y=25,uranusText.scale.set(50,20,40),targetTextUranus.push(uranusText),neptuneimageText=new text("../images/neptunetext.png"),(neptuneText=new THREE.Sprite(neptuneimageText.TextImg)).position.y=27,neptuneText.scale.set(50,20,40),targetTextNeptune.push(neptuneText),document.addEventListener("mousedown",clickPosition,!1);let recognition=new webkitSpeechRecognition;recognition.lang="ja-JP",recognition.addEventListener("result",function(e){let speechtext;switch(e.results[0][0].transcript){case"太陽":case"3":sunPage();break;case"彗星":case"マーキュリー":mercuryPage();break;case"きんせい":case"ヴィーナス":venusPage();break;case"地球":case"アース":earthPage();break;case"月":case"ムーン":moonPage();break;case"火星":case"まず":case"まーず":marsPage();break;case"木星":case"ジュピター":jupiterPage();break;case"土星":case"サターン":saturnPage();break;case"天王星":case"ウラヌス":uranusPage();break;case"海王星":case"ネプチューン":neptunePage();break;default:document.querySelector(".speechBtn").classList.remove("speechout"),document.querySelector("#stage").classList.remove("speechopen"),document.querySelector(".micWrap").classList.remove("micIn"),document.querySelector(".micWrap").classList.add("micOut"),document.querySelector(".masc").classList.add("none"),clearTimeout(speechtime)}});let timerID=setInterval("clock()",500);function clock(){document.getElementById("time").innerHTML=getNow(),document.getElementById("today").innerHTML=getToday()}function getNow(){let now=new Date,hour=now.getHours(),min=now.getMinutes(),totime;return hour<10&&(hour="0"+hour),min<10&&(min="0"+min),hour+"："+min}function getToday(){let now=new Date,mon=now.getMonth()+1,day=now.getDate(),today;return mon<10&&(mon="0"+mon),day<10&&(day="0"+day),mon+"/"+day}manager=new AudioManager({useMicrophone:!0,onEnterFrame:function(){let volume,size=92+Utils.sum(this.analysers.mic.getByteFrequencyData())/2e3,adj=(80-size)/2-3;document.querySelector(".volume-viewer-volume").style.height=size+"px",document.querySelector(".volume-viewer-volume").style.width=size+"px",document.querySelector(".volume-viewer-volume").style.top=adj+"px",document.querySelector(".volume-viewer-volume").style.left=adj+"px"}}).init();